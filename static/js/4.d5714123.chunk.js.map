{"version":3,"sources":["hoc/WithAuthRedirect.tsx","components/Users/Users.module.css","assets/images/user-icon.png","components/Common/Pagination/Pagination.tsx","components/Users/Users.tsx","outside/users-selector.ts","components/Users/UsersContainer.tsx"],"names":["mapStateToPropsForRedirect","state","isAuth","auth","withAuthRedirect","Component","connect","fake","props","restProps","to","module","exports","useStyles","makeStyles","nav","display","justifyContent","marginBottom","ul","listStyle","padding","margin","color","Pagination","classes","items","usePagination","count","totalCount","className","map","index","page","type","selected","item","children","style","fontWeight","undefined","fontSize","marginRight","onClick","e","onPageChanged","Users","pagesCount","Math","ceil","totalUsersCount","pageSize","users","u","styles","userItem","id","userPhoto","src","photos","small","alt","userItemProfileInfo","userItemName","name","userItemLocation","userItemStatus","followBtn","followed","disabled","followingInProgress","some","unfollow","backgroundColor","fontFamily","cursor","boxShadow","borderRadius","follow","touchAction","zoom","getUsers","createSelector","usersPage","filter","getPageSize","getTotalUsersCount","getCurrentPage","currentPage","getIsFetching","isFetching","getFollowingInProgress","UsersContainer","pageNumber","this","Downloader","React","compose","console","log","getUsersThunkCreator","followThunkCreator","unfollowThunkCreator","setCurrentPage","setTotalUsersCount","toggleIsFollowingProgress"],"mappings":"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","file":"static/js/4.d5714123.chunk.js","sourcesContent":["import React, {ComponentType} from 'react'\r\nimport { Redirect } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\nimport { AppStateType } from \"../outside/redux-store\";\r\n\r\ntype MapStateToPropsType = {\r\n        isAuth: boolean\r\n}\r\n\r\ntype DispatchPropsType = {\r\n    fake: () => void\r\n}\r\n\r\nlet mapStateToPropsForRedirect = (state: AppStateType) => ({\r\n    isAuth: state.auth.isAuth\r\n})\r\n\r\nexport function withAuthRedirect<P>(Component: React.ComponentType<P>) {\r\n    const RedirectComponent: React.FC<MapStateToPropsType & DispatchPropsType> = (props) => {\r\n        let { isAuth, fake, ...restProps } = props\r\n        if (!isAuth) return <Redirect to={'/login'} />\r\n\r\n        return <Component {...restProps as P} />\r\n    }\r\n    let ConnectedAuthRedirectComponent = connect<MapStateToPropsType, DispatchPropsType, P, AppStateType>(mapStateToPropsForRedirect, {fake: () => {}})(RedirectComponent)\r\n    return ConnectedAuthRedirectComponent\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userPhoto\":\"Users_userPhoto__14qd3\",\"selectedPage\":\"Users_selectedPage__3ix82\",\"userItemProfileInfo\":\"Users_userItemProfileInfo__UVSz5\"};","export default __webpack_public_path__ + \"static/media/user-icon.81251c2b.png\";","import React from 'react';\r\nimport { usePagination } from '@material-ui/lab/Pagination';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\ntype PaginationPropsType = {\r\n    totalCount: number\r\n    onPageChanged: (pageNumber: number) => void\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n    nav: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        marginBottom: '13px'\r\n    },\r\n    ul: {\r\n        listStyle: 'none',\r\n        padding: 0,\r\n        margin: 0,\r\n        display: 'flex',\r\n        color: 'white'\r\n    },\r\n});\r\n\r\nexport default function Pagination(props: PaginationPropsType) {\r\n    const classes = useStyles();\r\n    const { items } = usePagination({\r\n        count: props.totalCount,\r\n    });\r\n\r\n    return (\r\n        <nav className={classes.nav}>\r\n            <ul className={classes.ul}>\r\n                {items.map(({ page, type, selected, ...item }, index) => {\r\n                    let children = null;\r\n                    if (type === 'start-ellipsis' || type === 'end-ellipsis') {\r\n                        children = 'â€¦';\r\n                    } else if (type === 'page') {\r\n                        children = (\r\n                            <button type=\"button\" style={{ fontWeight: selected ? 'bold' : undefined, fontSize: '20px', marginRight: '7px' }} {...item} >\r\n                                {page}\r\n                            </button>\r\n                        );\r\n                    } else {\r\n                        children = (\r\n                            <button type=\"button\" style={{ fontSize: '20px', marginRight: '7px' }} {...item} >\r\n                                {type}\r\n                            </button>\r\n                        );\r\n                    }\r\n\r\n                    return <li key={index} onClick={(e) => {props.onPageChanged(page)}}>{children}</li>;\r\n                })}\r\n            </ul>\r\n        </nav>\r\n    );\r\n}","import React from \"react\";\r\nimport userPhoto from \"../../assets/images/user-icon.png\"\r\nimport styles from \"./Users.module.css\";\r\nimport {NavLink} from \"react-router-dom\";\r\nimport {UserType} from \"../../outside/users-reducer\";\r\nimport Pagination from \"../Common/Pagination/Pagination\";\r\n\r\ntype UsersPropsType = {\r\n    users: Array<UserType>\r\n    pageSize: number\r\n    totalUsersCount: number\r\n    followingInProgress: Array<number>\r\n    follow: (userID: number) => void\r\n    unfollow: (userID: number) => void\r\n    onPageChanged: (pageNumber: number) => void\r\n}\r\n\r\nconst Users = (props: UsersPropsType) => {\r\n    let pagesCount = Math.ceil(props.totalUsersCount / props.pageSize)\r\n\r\n    return <div>\r\n        {\r\n            props.users.map(u => <div key={u.id} className={styles.userItem}>\r\n                <div>\r\n                    <NavLink to={\"/profile/\" + u.id}>\r\n                        <img\r\n                            className={styles.userPhoto}\r\n                            src={u.photos.small !== null ? u.photos.small : userPhoto}\r\n                            alt=\"friend\"/>\r\n                    </NavLink>\r\n                </div>\r\n                <div className={styles.userItemProfileInfo}>\r\n                    <div className={styles.userItemName}>{u.name}</div>\r\n                    <div className={styles.userItemLocation}>{\"props.location\"}</div>\r\n                    <div className={styles.userItemStatus}>{\"props.status\"}</div>\r\n                </div>\r\n                <div className={styles.followBtn}>\r\n                    {u.followed\r\n                        ? <button\r\n                            disabled={props.followingInProgress.some(id => id === u.id)}\r\n                            onClick={() => {\r\n                                props.unfollow(u.id)\r\n                            }}\r\n                            style={{\r\n                                backgroundColor: \"gray\",\r\n                                fontFamily: \"Monserrat\",\r\n                                fontSize: \"20px\",\r\n                                cursor: \"pointer\",\r\n                                boxShadow: \"inset 0 20px 20px #ffffff\",\r\n                                borderRadius: \"8px\"\r\n                            }}>Unfollow</button>\r\n                        : <button\r\n                            disabled={props.followingInProgress.some(id => id === u.id)}\r\n                            onClick={() => {\r\n                                props.follow(u.id)\r\n                            }}\r\n                            style={{\r\n                                backgroundColor: \"#f6f6f6\",\r\n                                fontFamily: \"Monserrat\",\r\n                                fontSize: \"20px\",\r\n                                boxShadow: \"inset 0 20px 20px #ffffff\",\r\n                                borderRadius: \"8px\",\r\n                                touchAction: \"0 -20px 20px #ffffff\",\r\n                                zoom: \"1\",\r\n                                cursor: \"pointer\"\r\n                            }\r\n                            }>Follow</button>\r\n                    }\r\n                </div>\r\n            </div>)\r\n        }\r\n        <div>\r\n            <Pagination totalCount={pagesCount} onPageChanged={props.onPageChanged}/>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default Users","import { AppStateType } from \"./redux-store\"\r\nimport { createSelector } from 'reselect'\r\nimport { UserType } from \"./users-reducer\"\r\n\r\nconst getUsersSelector = (state: AppStateType) => {\r\n    return state.usersPage.users\r\n}\r\n\r\nexport const getUsers = createSelector(getUsersSelector,\r\n    (users: Array<UserType>) => {\r\n        return users.filter(u => true)\r\n    })\r\n\r\nexport const getPageSize = (state: AppStateType) => {\r\n    return state.usersPage.pageSize\r\n}\r\n\r\nexport const getTotalUsersCount = (state: AppStateType) => {\r\n    return state.usersPage.totalUsersCount\r\n}\r\n\r\nexport const getCurrentPage = (state: AppStateType) => {\r\n    return state.usersPage.currentPage\r\n}\r\n\r\nexport const getIsFetching = (state: AppStateType) => {\r\n    return state.usersPage.isFetching\r\n}\r\n\r\nexport const getFollowingInProgress = (state: AppStateType) => {\r\n    return state.usersPage.followingInProgress\r\n}","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Users from './Users';\r\nimport { compose } from 'redux';\r\nimport { withAuthRedirect } from '../../hoc/WithAuthRedirect';\r\nimport {\r\n    followThunkCreator,\r\n    getUsersThunkCreator, setCurrentPage, setTotalUsersCount,\r\n    toggleIsFollowingProgress,\r\n    unfollowThunkCreator,\r\n    UserType\r\n} from \"../../outside/users-reducer\";\r\nimport Downloader from \"../Common/Preloader/Downloader\";\r\nimport {AppStateType} from \"../../outside/redux-store\";\r\nimport {\r\n    getCurrentPage,\r\n    getFollowingInProgress,\r\n    getIsFetching,\r\n    getPageSize,\r\n    getTotalUsersCount,\r\n    getUsers\r\n} from \"../../outside/users-selector\";\r\n\r\n\r\ntype MapStateToPropsType = {\r\n    users: Array<UserType>\r\n    pageSize: number\r\n    totalUsersCount: number\r\n    currentPage: number\r\n    isFetching: boolean\r\n    followingInProgress: Array<number>\r\n}\r\n\r\ntype MapDispatchToPropsType = {\r\n    follow: (userId: number) => void\r\n    unfollow: (userId: number) => void\r\n    setCurrentPage: (currentPage: number) => void\r\n    setTotalUsersCount: (totalUsers: number) => void\r\n    toggleIsFollowingProgress: (isFetching: boolean, userId: number) => void\r\n    getUsers: (currentPage: number, pageSize: number) => void\r\n}\r\n\r\ntype UsersContainerPropsType = MapStateToPropsType & MapDispatchToPropsType\r\n\r\nclass UsersContainer extends React.Component<UsersContainerPropsType> {\r\n\r\n    componentDidMount() {\r\n        const {currentPage,pageSize } = this.props\r\n        this.props.getUsers(currentPage, pageSize)\r\n    }\r\n\r\n    onPageChanged = (pageNumber: number) => {\r\n        const {pageSize} = this.props\r\n        this.props.getUsers(pageNumber, pageSize)\r\n    }\r\n\r\n    render() {\r\n        return <>\r\n            {this.props.isFetching ? <Downloader /> : null}\r\n            <Users\r\n                users={this.props.users}\r\n                pageSize={this.props.pageSize}\r\n                totalUsersCount={this.props.totalUsersCount}\r\n                followingInProgress={this.props.followingInProgress}\r\n                follow={this.props.follow}\r\n                unfollow={this.props.unfollow}\r\n                onPageChanged={this.onPageChanged} />\r\n        </>\r\n    }\r\n}\r\n\r\nlet mapStateToProps = (state: AppStateType) => {\r\n    console.log('mapStateToProps USERS')\r\n    return {\r\n        users: getUsers(state),\r\n        pageSize: getPageSize(state),\r\n        totalUsersCount:  getTotalUsersCount(state),\r\n        currentPage: getCurrentPage(state),\r\n        isFetching: getIsFetching(state),\r\n        followingInProgress: getFollowingInProgress(state)\r\n    }\r\n}\r\n\r\nexport default compose<React.ComponentType>(\r\n    withAuthRedirect,\r\n    connect(mapStateToProps, {\r\n        getUsers: getUsersThunkCreator,\r\n        follow: followThunkCreator,\r\n        unfollow: unfollowThunkCreator,\r\n        setCurrentPage, setTotalUsersCount, toggleIsFollowingProgress\r\n    })\r\n)(UsersContainer)"],"sourceRoot":""}